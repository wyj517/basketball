import{_ as J,r as x,a as A,c as V,o as c,b as o,d as s,e as S,w as y,F as h,f as T,g as u,u as M}from"./index-lGCosI-d.js";import{r as j,u as g,w as H}from"./xlsx-CKN5doRT.js";const O={class:"background"},q={class:"scoreboard-setup"},G={class:"form-item form-item-inline"},K={class:"teams"},Q={class:"team-box"},X={style:{display:"flex",gap:"10px","align-items":"center"}},Y={class:"team-box"},Z={style:{display:"flex",gap:"10px","align-items":"center"}},ee={class:"settings"},te={class:"form-item"},le={class:"form-item"},ne={class:"form-item"},oe={class:"form-item"},ae={style:{display:"flex","justify-content":"center","margin-top":"20px"}},se={class:"create-btn-container"},re={__name:"HelloWorld",setup(me){const I=M(),v=x(""),_=x(""),E=x(""),k=x(null),m=A({name:"",players:[{number:"",name:""},{number:"",name:""},{number:"",name:""}]}),i=A({name:"",players:[{number:"",name:""},{number:"",name:""},{number:"",name:""}]}),p=A({totalPeriods:4,periodTime:12,breakTime:2,enable24Seconds:!0});function w(a){a==="A"?m.players.push({number:"",name:""}):i.players.push({number:"",name:""})}function U(a){const e=document.createElement("input");e.type="file",e.accept="image/*",e.onchange=n=>{const l=n.target.files[0];if(l){const d=new FileReader;d.onload=t=>{a==="A"?_.value=t.target.result:E.value=t.target.result,localStorage.setItem(`team${a}Logo`,t.target.result)},d.readAsDataURL(l)}},e.click()}function F(){k.value&&k.value.click()}function $(){try{const a=g.book_new(),e=[["队伍名称","teamA"],["号码","姓名"],["1","张三"],["2","李四"],["3","王五"]],n=[["队伍名称","teamB"],["号码","姓名"],["1","赵六"],["2","孙七"],["3","周八"]],l=g.aoa_to_sheet(e),d=g.aoa_to_sheet(n);g.book_append_sheet(a,l,"队伍A"),g.book_append_sheet(a,d,"队伍B"),H(a,"篮球赛人员信息导入模板.xlsx")}catch(a){console.error("生成Excel模板失败:",a),alert("下载模板失败，请重试")}}function L(a){const e=a.target.files[0];if(!e)return;m.name="",i.name="",m.players=[],i.players=[];const n=new FileReader;n.onload=l=>{try{const d=new Uint8Array(l.target.result),t=j(d,{type:"array"});if(t.SheetNames.length>=2){const b=t.SheetNames.find(f=>f.includes("A"))||t.SheetNames[0],r=t.Sheets[b];r.B1&&(m.name=r.B1.v||"");const D=g.sheet_to_json(r,{range:2,header:["number","name"]});m.players=D.filter(f=>f.number||f.name);const W=t.SheetNames.find(f=>f.includes("B"))||t.SheetNames[1],B=t.Sheets[W];B.B1&&(i.name=B.B1.v||"");const R=g.sheet_to_json(B,{range:2,header:["number","name"]});i.players=R.filter(f=>f.number||f.name),alert("队伍信息导入成功！")}else alert("Excel 文件格式不符合要求，需要至少两个 Sheet")}catch(d){console.error("解析Excel文件失败:",d),alert("导入失败，请检查Excel文件格式")}},n.readAsArrayBuffer(e),a.target.value=""}function C(a,e){a==="A"?m.players.splice(e,1):i.players.splice(e,1)}function N(a){a.number<0&&(a.number=0)}function P(){if(!v.value.trim())return alert("请输入赛事名称"),!1;if(!m.name.trim())return alert("请输入队伍A名称"),!1;if(!i.name.trim())return alert("请输入队伍B名称"),!1;const a=m.players.some(n=>n.number&&String(n.number).trim()),e=i.players.some(n=>n.number&&String(n.number).trim());return a?e?!0:(alert("队伍B至少需要一名球员"),!1):(alert("队伍A至少需要一名球员"),!1)}function z(){if(!P())return;const a={...m,players:m.players.filter(l=>l.number&&String(l.number).trim()).map(l=>({...l,name:l.name||""}))},e={...i,players:i.players.filter(l=>l.number&&String(l.number).trim()).map(l=>({...l,name:l.name||""}))};console.log(a);const n={matchName:v.value,teamA:a,teamB:e,settings:p};I.push({path:"/competition",query:{data:JSON.stringify(n)}}),setTimeout(()=>{const l=window.location.origin+"/#/test?data="+encodeURIComponent(JSON.stringify(n));window.open(l,"_blank")},100)}return(a,e)=>{const n=S("el-input"),l=S("el-button"),d=S("el-switch");return c(),V("div",O,[o("div",q,[e[32]||(e[32]=o("h1",{class:"title"},"篮球赛记分大屏幕",-1)),o("div",G,[e[11]||(e[11]=o("label",null,"赛事名称",-1)),s(n,{modelValue:v.value,"onUpdate:modelValue":e[0]||(e[0]=t=>v.value=t),style:{width:"330px",height:"42px"}},null,8,["modelValue"])]),o("div",K,[o("div",Q,[e[15]||(e[15]=o("h3",null,"队伍A名称",-1)),o("div",X,[s(n,{modelValue:m.name,"onUpdate:modelValue":e[1]||(e[1]=t=>m.name=t),placeholder:"请输入队伍A名称",style:{flex:"1"}},null,8,["modelValue"]),s(l,{type:"primary",onClick:e[2]||(e[2]=t=>U("A")),size:"small"},{default:y(()=>[...e[12]||(e[12]=[u("导入Logo",-1)])]),_:1})]),e[16]||(e[16]=o("h4",null,"球员名单（球衣号[必填], 姓名[非必填]）",-1)),(c(!0),V(h,null,T(m.players,(t,b)=>(c(),V("div",{key:b,class:"player-item"},[s(n,{modelValue:t.number,"onUpdate:modelValue":r=>t.number=r,type:"number",placeholder:"号码",class:"num-input",min:"0",onInput:r=>N(t)},null,8,["modelValue","onUpdate:modelValue","onInput"]),s(n,{modelValue:t.name,"onUpdate:modelValue":r=>t.name=r,placeholder:"姓名",class:"name-input"},null,8,["modelValue","onUpdate:modelValue"]),s(l,{type:"danger",onClick:r=>C("A",b)},{default:y(()=>[...e[13]||(e[13]=[u("删除",-1)])]),_:1},8,["onClick"])]))),128)),s(l,{class:"add-btn",type:"primary",onClick:e[3]||(e[3]=t=>w("A"))},{default:y(()=>[...e[14]||(e[14]=[u("添加球员",-1)])]),_:1})]),o("div",Y,[e[20]||(e[20]=o("h3",null,"队伍B名称",-1)),o("div",Z,[s(n,{modelValue:i.name,"onUpdate:modelValue":e[4]||(e[4]=t=>i.name=t),placeholder:"请输入队伍B名称",style:{flex:"1"}},null,8,["modelValue"]),s(l,{type:"primary",onClick:e[5]||(e[5]=t=>U("B")),size:"small"},{default:y(()=>[...e[17]||(e[17]=[u("导入Logo",-1)])]),_:1})]),e[21]||(e[21]=o("h4",null,"球员名单（球衣号[非必填], 姓名）",-1)),(c(!0),V(h,null,T(i.players,(t,b)=>(c(),V("div",{key:b,class:"player-item"},[s(n,{modelValue:t.number,"onUpdate:modelValue":r=>t.number=r,type:"number",placeholder:"号码",class:"num-input",min:"0",onInput:r=>N(t)},null,8,["modelValue","onUpdate:modelValue","onInput"]),s(n,{modelValue:t.name,"onUpdate:modelValue":r=>t.name=r,placeholder:"姓名",class:"name-input"},null,8,["modelValue","onUpdate:modelValue"]),s(l,{type:"danger",onClick:r=>C("B",b)},{default:y(()=>[...e[18]||(e[18]=[u("删除",-1)])]),_:1},8,["onClick"])]))),128)),s(l,{class:"add-btn",type:"primary",onClick:e[6]||(e[6]=t=>w("B"))},{default:y(()=>[...e[19]||(e[19]=[u("添加球员",-1)])]),_:1})])]),o("div",ee,[o("div",te,[e[22]||(e[22]=o("label",null,"比赛总节数",-1)),s(n,{modelValue:p.totalPeriods,"onUpdate:modelValue":e[7]||(e[7]=t=>p.totalPeriods=t),modelModifiers:{number:!0},type:"number",style:{width:"80px"}},null,8,["modelValue"]),e[23]||(e[23]=u(" 节 ",-1))]),o("div",le,[e[24]||(e[24]=o("label",null,"单节时长",-1)),s(n,{modelValue:p.periodTime,"onUpdate:modelValue":e[8]||(e[8]=t=>p.periodTime=t),modelModifiers:{number:!0},type:"number",style:{width:"80px"}},null,8,["modelValue"]),e[25]||(e[25]=u(" 分钟 ",-1))]),o("div",ne,[e[26]||(e[26]=o("label",null,"节间休息时长",-1)),s(n,{modelValue:p.breakTime,"onUpdate:modelValue":e[9]||(e[9]=t=>p.breakTime=t),modelModifiers:{number:!0},type:"number",style:{width:"80px"}},null,8,["modelValue"]),e[27]||(e[27]=u(" 分钟 ",-1))]),o("div",oe,[e[28]||(e[28]=o("label",null,"是否启用24秒违例规则",-1)),s(d,{modelValue:p.enable24Seconds,"onUpdate:modelValue":e[10]||(e[10]=t=>p.enable24Seconds=t)},null,8,["modelValue"])])]),o("div",ae,[s(l,{type:"success",size:"large",onClick:F,style:{"margin-right":"20px"}},{default:y(()=>[...e[29]||(e[29]=[u(" 导入队伍信息(Excel) ",-1)])]),_:1}),s(l,{type:"primary",size:"large",onClick:$},{default:y(()=>[...e[30]||(e[30]=[u(" 下载导入模板 ",-1)])]),_:1})]),o("input",{ref_key:"excelFileInput",ref:k,type:"file",accept:".xlsx,.xls",style:{display:"none"},onChange:L},null,544),o("div",se,[s(l,{type:"primary",size:"large",onClick:z,style:{width:"200px",height:"50px","font-size":"18px"}},{default:y(()=>[...e[31]||(e[31]=[u(" 创建比赛并开始计分 ",-1)])]),_:1})])])])}}},de=J(re,[["__scopeId","data-v-dd880b6f"]]);export{de as default};
