import{_ as q,r as x,a as B,c as V,o as v,b as n,d as r,e as w,w as y,F as C,f as N,g as p,u as M}from"./index-Cx7cqMLC.js";import{u as H}from"./team-Bq6fvQqJ.js";import{r as J,u as g,w as G}from"./xlsx-CKN5doRT.js";const K={class:"background"},O={class:"scoreboard-setup"},Q={class:"form-item form-item-inline"},X={class:"teams"},Y={class:"team-box"},Z={style:{display:"flex",gap:"10px","align-items":"center"}},ee={class:"team-box"},te={style:{display:"flex",gap:"10px","align-items":"center"}},le={class:"settings"},oe={class:"form-item"},ne={class:"form-item"},ae={class:"form-item"},re={class:"form-item"},se={style:{display:"flex","justify-content":"center","margin-top":"20px"}},me={class:"create-btn-container"},ie={__name:"HelloWorld",setup(ue){const d=H(),F=M(),k=x(""),_=x(""),E=x(""),S=x(null),i=B({name:"",players:[{number:"",name:""},{number:"",name:""},{number:"",name:""}]}),u=B({name:"",players:[{number:"",name:""},{number:"",name:""},{number:"",name:""}]}),s=B({totalPeriods:4,periodTime:12,breakTime:2,enable24Seconds:!0});function T(a){a==="A"?i.players.push({number:"",name:""}):u.players.push({number:"",name:""})}function P(a){const e=document.createElement("input");e.type="file",e.accept="image/*",e.onchange=o=>{const l=o.target.files[0];if(l){const f=new FileReader;f.onload=t=>{a==="A"?_.value=t.target.result:E.value=t.target.result,localStorage.setItem(`team${a}Logo`,t.target.result)},f.readAsDataURL(l)}},e.click()}function I(){S.value&&S.value.click()}function $(){try{const a=g.book_new(),e=[["队伍名称","teamA"],["号码","姓名"],["1","张三"],["2","李四"],["3","王五"]],o=[["队伍名称","teamB"],["号码","姓名"],["1","赵六"],["2","孙七"],["3","周八"]],l=g.aoa_to_sheet(e),f=g.aoa_to_sheet(o);g.book_append_sheet(a,l,"队伍A"),g.book_append_sheet(a,f,"队伍B"),G(a,"篮球赛人员信息导入模板.xlsx")}catch(a){console.error("生成Excel模板失败:",a),alert("下载模板失败，请重试")}}function z(a){const e=a.target.files[0];if(!e)return;i.name="",u.name="",i.players=[],u.players=[];const o=new FileReader;o.onload=l=>{try{const f=new Uint8Array(l.target.result),t=J(f,{type:"array"});if(t.SheetNames.length>=2){const c=t.SheetNames.find(b=>b.includes("A"))||t.SheetNames[0],m=t.Sheets[c];m.B1&&(i.name=m.B1.v||"");const W=g.sheet_to_json(m,{range:2,header:["number","name"]});i.players=W.filter(b=>b.number||b.name);const j=t.SheetNames.find(b=>b.includes("B"))||t.SheetNames[1],A=t.Sheets[j];A.B1&&(u.name=A.B1.v||"");const R=g.sheet_to_json(A,{range:2,header:["number","name"]});u.players=R.filter(b=>b.number||b.name),alert("队伍信息导入成功！")}else alert("Excel 文件格式不符合要求，需要至少两个 Sheet")}catch(f){console.error("解析Excel文件失败:",f),alert("导入失败，请检查Excel文件格式")}},o.readAsArrayBuffer(e),a.target.value=""}function U(a,e){a==="A"?i.players.splice(e,1):u.players.splice(e,1)}function h(a){a.number<0&&(a.number=0)}function L(){if(!k.value.trim())return alert("请输入赛事名称"),!1;if(!i.name.trim())return alert("请输入队伍A名称"),!1;if(!u.name.trim())return alert("请输入队伍B名称"),!1;const a=i.players.some(o=>o.number&&String(o.number).trim()),e=u.players.some(o=>o.number&&String(o.number).trim());return a?e?!0:(alert("队伍B至少需要一名球员"),!1):(alert("队伍A至少需要一名球员"),!1)}function D(){if(!L())return;const a={...i,score:0,teamFoul:0,teamPauses:0,periodScores:Array(s.totalPeriods+1).fill(0),SectionFouls:Array(s.totalPeriods+1).fill(0),players:i.players.filter(l=>l.number&&String(l.number).trim()).map(l=>({...l,name:l.name||"",number:l.number||0,score:0,foul:0,twoSource:0,threeSource:0,oneSource:0,lb:0,zg:0,gm:0,qd:0,jsfg:0,wt:0,dq:0}))},e={...u,score:0,teamFoul:0,teamPauses:0,periodScores:Array(s.totalPeriods+1).fill(0),SectionFouls:Array(s.totalPeriods+1).fill(0),players:u.players.filter(l=>l.number&&String(l.number).trim()).map(l=>({...l,name:l.name||"",number:l.number||0,score:0,foul:0,twoSource:0,threeSource:0,oneSource:0,lb:0,zg:0,gm:0,qd:0,jsfg:0,wt:0,dq:0}))},o={matchName:k.value};d.currentPeriod=1,d.totalPeriods=s.totalPeriods,d.matchName=o.matchName,d.timer.mode="period",d.timer.periodTime=s.periodTime*60*1e3,d.timer.breakTime=s.breakTime*60*1e3,d.firstPeriodTime=s.periodTime*60*1e3,d.firstBreakTime=s.breakTime*60*1e3,d.timer.lastUpdate=0,d.timer.isRunning=!1,d.teamA=a,d.teamB=e,F.push({path:"/competition"}),setTimeout(()=>{const l=window.location.origin+"/#/test";window.open(l,"_blank")},100)}return(a,e)=>{const o=w("el-input"),l=w("el-button"),f=w("el-switch");return v(),V("div",K,[n("div",O,[e[32]||(e[32]=n("h1",{class:"title"},"篮球赛记分大屏幕",-1)),n("div",Q,[e[11]||(e[11]=n("label",null,"赛事名称",-1)),r(o,{modelValue:k.value,"onUpdate:modelValue":e[0]||(e[0]=t=>k.value=t),style:{width:"330px",height:"42px"}},null,8,["modelValue"])]),n("div",X,[n("div",Y,[e[15]||(e[15]=n("h3",null,"队伍A名称",-1)),n("div",Z,[r(o,{modelValue:i.name,"onUpdate:modelValue":e[1]||(e[1]=t=>i.name=t),placeholder:"请输入队伍A名称",style:{flex:"1"}},null,8,["modelValue"]),r(l,{type:"primary",onClick:e[2]||(e[2]=t=>P("A")),size:"small"},{default:y(()=>[...e[12]||(e[12]=[p("导入Logo",-1)])]),_:1})]),e[16]||(e[16]=n("h4",null,"球员名单（球衣号[必填], 姓名[非必填]）",-1)),(v(!0),V(C,null,N(i.players,(t,c)=>(v(),V("div",{key:c,class:"player-item"},[r(o,{modelValue:t.number,"onUpdate:modelValue":m=>t.number=m,type:"number",placeholder:"号码",class:"num-input",min:"0",onInput:m=>h(t)},null,8,["modelValue","onUpdate:modelValue","onInput"]),r(o,{modelValue:t.name,"onUpdate:modelValue":m=>t.name=m,placeholder:"姓名",class:"name-input"},null,8,["modelValue","onUpdate:modelValue"]),r(l,{type:"danger",onClick:m=>U("A",c)},{default:y(()=>[...e[13]||(e[13]=[p("删除",-1)])]),_:1},8,["onClick"])]))),128)),r(l,{class:"add-btn",type:"primary",onClick:e[3]||(e[3]=t=>T("A"))},{default:y(()=>[...e[14]||(e[14]=[p("添加球员",-1)])]),_:1})]),n("div",ee,[e[20]||(e[20]=n("h3",null,"队伍B名称",-1)),n("div",te,[r(o,{modelValue:u.name,"onUpdate:modelValue":e[4]||(e[4]=t=>u.name=t),placeholder:"请输入队伍B名称",style:{flex:"1"}},null,8,["modelValue"]),r(l,{type:"primary",onClick:e[5]||(e[5]=t=>P("B")),size:"small"},{default:y(()=>[...e[17]||(e[17]=[p("导入Logo",-1)])]),_:1})]),e[21]||(e[21]=n("h4",null,"球员名单（球衣号[非必填], 姓名）",-1)),(v(!0),V(C,null,N(u.players,(t,c)=>(v(),V("div",{key:c,class:"player-item"},[r(o,{modelValue:t.number,"onUpdate:modelValue":m=>t.number=m,type:"number",placeholder:"号码",class:"num-input",min:"0",onInput:m=>h(t)},null,8,["modelValue","onUpdate:modelValue","onInput"]),r(o,{modelValue:t.name,"onUpdate:modelValue":m=>t.name=m,placeholder:"姓名",class:"name-input"},null,8,["modelValue","onUpdate:modelValue"]),r(l,{type:"danger",onClick:m=>U("B",c)},{default:y(()=>[...e[18]||(e[18]=[p("删除",-1)])]),_:1},8,["onClick"])]))),128)),r(l,{class:"add-btn",type:"primary",onClick:e[6]||(e[6]=t=>T("B"))},{default:y(()=>[...e[19]||(e[19]=[p("添加球员",-1)])]),_:1})])]),n("div",le,[n("div",oe,[e[22]||(e[22]=n("label",null,"比赛总节数",-1)),r(o,{modelValue:s.totalPeriods,"onUpdate:modelValue":e[7]||(e[7]=t=>s.totalPeriods=t),modelModifiers:{number:!0},type:"number",style:{width:"80px"}},null,8,["modelValue"]),e[23]||(e[23]=p(" 节 ",-1))]),n("div",ne,[e[24]||(e[24]=n("label",null,"单节时长",-1)),r(o,{modelValue:s.periodTime,"onUpdate:modelValue":e[8]||(e[8]=t=>s.periodTime=t),modelModifiers:{number:!0},type:"number",style:{width:"80px"}},null,8,["modelValue"]),e[25]||(e[25]=p(" 分钟 ",-1))]),n("div",ae,[e[26]||(e[26]=n("label",null,"节间休息时长",-1)),r(o,{modelValue:s.breakTime,"onUpdate:modelValue":e[9]||(e[9]=t=>s.breakTime=t),modelModifiers:{number:!0},type:"number",style:{width:"80px"}},null,8,["modelValue"]),e[27]||(e[27]=p(" 分钟 ",-1))]),n("div",re,[e[28]||(e[28]=n("label",null,"是否启用24秒违例规则",-1)),r(f,{modelValue:s.enable24Seconds,"onUpdate:modelValue":e[10]||(e[10]=t=>s.enable24Seconds=t)},null,8,["modelValue"])])]),n("div",se,[r(l,{type:"success",size:"large",onClick:I,style:{"margin-right":"20px"}},{default:y(()=>[...e[29]||(e[29]=[p(" 导入队伍信息(Excel) ",-1)])]),_:1}),r(l,{type:"primary",size:"large",onClick:$},{default:y(()=>[...e[30]||(e[30]=[p(" 下载导入模板 ",-1)])]),_:1})]),n("input",{ref_key:"excelFileInput",ref:S,type:"file",accept:".xlsx,.xls",style:{display:"none"},onChange:z},null,544),n("div",me,[r(l,{type:"primary",size:"large",onClick:D,style:{width:"200px",height:"50px","font-size":"18px"}},{default:y(()=>[...e[31]||(e[31]=[p(" 创建比赛并开始计分 ",-1)])]),_:1})])])])}}},be=q(ie,[["__scopeId","data-v-c5f4a31b"]]);export{be as default};
