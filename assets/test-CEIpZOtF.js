import{_ as N,r as n,x as k,c as u,o as l,b as t,t as c,F as A,f as T,s as te,m as r,j as U,y as w,w as ae,h as b,p as i,T as se,d as C,q as le}from"./index-Cx7cqMLC.js";import{u as D}from"./team-Bq6fvQqJ.js";import{F as z}from"./FlipDigit-Bzmj1FEU.js";/* empty css                                                             */const P="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20width='96'%20height='96'%20viewBox='0%200%2024%2024'%20fill='none'%20stroke='white'%20stroke-width='2'%20stroke-linecap='round'%20stroke-linejoin='round'%3e%3c!--%20尾巴%20--%3e%3cline%20x1='12'%20y1='4'%20x2='12'%20y2='16'/%3e%3c!--%20箭头%20--%3e%3cpolyline%20points='6%2012%2012%2018%2018%2012'/%3e%3c/svg%3e",oe={class:"scoreboard"},re={class:"title-container"},ne={class:"title"},ie={class:"players-container"},ue={class:"score-table"},ce={class:"score-play"},me={__name:"teamPk",props:{customPlayers:{type:Array,default:null},teamName:{type:String,default:""},num:{type:Number,default:1}},setup(f){const a=D(),_=f,g=n([{id:0,name:"0",score:0,foul:0}]);return k(()=>_.customPlayers?_.customPlayers.map(m=>({id:m.number||"0",name:m.name||"未知",score:m.score||0,foul:m.foul||0})):g.value),(m,S)=>(l(),u("div",oe,[t("div",re,[t("h2",ne,c(f.teamName),1)]),t("div",ie,[t("table",ue,[S[0]||(S[0]=t("thead",null,[t("tr",null,[t("th",null,"号码"),t("th",null,"姓名"),t("th",null,"得分"),t("th",null,"犯规")])],-1)),t("tbody",ce,[(l(!0),u(A,null,T(f.num?r(a).teamA.players:r(a).teamB.players,(p,h)=>(l(),u("tr",{key:p.number,class:te({"top-five":h<5})},[t("td",null,c(p.number),1),t("td",null,c(p.name),1),t("td",null,c(p.score),1),t("td",null,c(p.foul),1)],2))),128))])])])]))}},j=N(me,[["__scopeId","data-v-8d965a4f"]]),H=""+new URL("logo-Bv1Wukfg.png",import.meta.url).href,de={__name:"FloatNumber",props:{value:{type:Number,required:!0},x:{type:Number,default:0},duration:{type:Number,default:1e3}},setup(f){const a=f,_=n(!0);return U(()=>{setTimeout(()=>{_.value=!1},a.duration)}),(g,m)=>(l(),w(se,{name:"float",onAfterLeave:m[0]||(m[0]=S=>g.$emit("end"))},{default:ae(()=>[_.value?(l(),u("div",{key:0,class:"float-number",style:i({left:f.x+"px"})}," +"+c(f.value),5)):b("",!0)]),_:1}))}},X=N(de,[["__scopeId","data-v-26154419"]]),pe={class:"head"},ve={__name:"head",setup(f){const a=D();return(_,g)=>(l(),u("div",pe,[t("h1",null,c(r(a).matchName),1)]))}},fe=N(ve,[["__scopeId","data-v-179333be"]]);new BroadcastChannel("matchDataChannel");const ye={class:"background"},_e={class:"top_info"},he={class:"bottom_info"},ge={class:"center-panel",style:{order:"2"}},be={class:"vice-panel"},Se={class:"match-info-container"},Be={class:"teams-info"},xe={class:"team-logo team-a"},ke=["src"],Ae={class:"float-container float-left"},Te={class:"period-info",style:{order:"2"}},we={class:"period-number"},Ie={class:"period-status"},$e={class:"team-logo team-b"},Pe=["src","alt"],Fe={class:"float-container float-right"},Ne={class:"stats-container"},Le={class:"stat-row"},Me={class:"stat-row"},Ce={key:0,class:"vice-24s-section"},De={key:1,class:"vice-rest"},Ee={class:"rest-text",style:{color:"#49ddfa"}},Re={key:2,class:"vice-end"},F=30,Ve={__name:"test",setup(f){le();const a=D();n({name:"",score:0,players:[]});const _=n({name:"",score:0,players:[]});n(22);const g=n(0),m=n("playing"),S=n(!0),p=n(null),h=n(null),L=n(!0);let W=0;const I=n([]),$=n([]),M=n();function E(s){const e=String(s).padStart(2,"0");return[e[0],e[1]]}const G=k(()=>E(a.teamA.score)),J=k(()=>E(a.teamB.score)),K=(s,e)=>{const o={id:W++,value:e,x:Math.random()*100};s===1?I.value.push(o):$.value.push(o)},R=(s,e)=>{s===1?I.value=I.value.filter(o=>o.id!==e):$.value=$.value.filter(o=>o.id!==e)},v=n(!0),B=n(!0),O=k(()=>localStorage.getItem("teamALogo")||H),Q=k(()=>localStorage.getItem("teamBLogo")||H);function Y(s){const e=String(Math.floor(s/60)).padStart(2,"0"),o=String(s%60).padStart(2,"0");return`${e}:${o}`}function V(s){if(s<=0)return"00''00''";const e=Math.ceil(s/1e3);if(e>60){const o=Math.floor(e/60).toString().padStart(2,"0"),y=(e%60).toString().padStart(2,"0");return`${o}:${y}`}else{const o=Math.floor(s/1e3).toString().padStart(2,"0"),y=Math.floor(s%1e3/10).toString().padStart(2,"0");return`${o}''${y}''`}}let q=null;U(()=>{q=new BroadcastChannel("matchDataChannel"),q.onmessage=s=>{if(s.data.type==="scoreAdded"){const e=s.data.state;s.data.team===1?(a.teamA.score=e.teamA.score,a.teamA.players=e.teamA.players,a.teamA=e.teamA):(a.teamB.score=e.teamB.score,a.teamB.players=e.teamB.players,a.teamB=e.teamB),K(s.data.team,s.data.points)}else if(s.data.type==="foul"){const e=s.data,o=s.data.playIndex,y=s.data.currentPeriod||a.currentPeriod;s.data.team===1?(a.teamA.teamFoul=e.teamFoul,a.teamA.players[o].foul=e.foul,a.teamA.SectionFouls[y]=e.sectionFoul||0):(a.teamB.teamFoul=e.teamFoul,a.teamB.players[o].foul=e.foul,a.teamB.SectionFouls[y]=e.sectionFoul||0)}else if(s.data.type==="pause"){const e=s.data;s.data.team===1?a.teamA.teamPauses=e.pause:a.teamB.teamPauses=e.pause}else if(s.data.type==="time"){const e=s.data;M.value=e.timeType,a.currentPeriod=e.currentPeriod,a.timer.periodTime=e.periodTime,a.timer.breakTime=e.breakTime,Z(e)}else if(s.data.type==="hide"){const e=s.data;L.value=e.hide}else if(s.data.type==="possession"){const e=s.data;B.value=e.possession}else if(s.data.type==="swap"){const e=s.data;v.value=e.swap}}});function Z(s){ee(),s.time&&(s.timeType?p.value=setInterval(()=>{a.timer.periodTime>0?a.timer.periodTime-=F:(a.timer.periodTime=0,clearInterval(p.value),p.value=null)},F):h.value=setInterval(()=>{a.timer.breakTime>0?a.timer.breakTime-=F:(a.timer.breakTime=0,clearInterval(h.value),h.value=null)},F))}function ee(){p.value&&(clearInterval(p.value),p.value=null),h.value&&(clearInterval(h.value),h.value=null)}return(s,e)=>{var o,y;return l(),u("div",ye,[t("div",_e,[C(fe)]),t("div",he,[L.value?(l(),u("div",{key:0,class:"team-info-panel team-a-panel",style:i({order:v.value?1:3})},[C(j,{"custom-players":r(a).teamA.players,"team-name":r(a).teamA.name||"队伍A",num:1},null,8,["custom-players","team-name"])],4)):b("",!0),t("div",ge,[t("div",be,[e[4]||(e[4]=t("div",{class:"vice-title qiuquan"},null,-1)),t("div",Se,[t("div",Be,[t("div",{class:"team-info teamLeft",style:i({order:v.value?1:3})},[t("img",{src:P,alt:"箭头",style:i({opacity:B.value?1:0})},null,4),t("div",xe,[t("img",{src:P,alt:"箭头",class:"logo-arrow",style:i({opacity:B.value?0:1})},null,4),t("img",{src:O.value,class:"circular-image"},null,8,ke)]),t("div",Ae,[(l(!0),u(A,null,T(I.value,d=>(l(),w(X,{key:d.id,value:d.value,x:d.x,duration:20,onEnd:x=>R(1,d.id)},null,8,["value","x","onEnd"]))),128))]),t("div",{class:"flip-wrapper left-wrapper",style:i([{"margin-top":"14px"},{transform:`translateX(${v.value?"40%":"-40%"})`}])},[(l(!0),u(A,null,T(G.value,(d,x)=>(l(),w(z,{key:"a"+x,number:d.toString()},null,8,["number"]))),128))],4)],4),t("div",Te,[t("div",we,c(M.value?"第"+r(a).currentPeriod+"节":"节间休息"),1),t("div",Ie,c(M.value?V(r(a).timer.periodTime):V(r(a).timer.breakTime)),1),e[0]||(e[0]=t("div",{class:"VS",style:{position:"relative","font-size":"100px",top:"140px"}},null,-1))]),t("div",{class:"team-info teamRight",style:i({order:v.value?3:1})},[t("img",{src:P,alt:"箭头",style:i({opacity:B.value?0:1})},null,4),t("div",$e,[t("img",{src:P,alt:"箭头",class:"logo-arrow",style:i({opacity:B.value?1:0})},null,4),t("img",{src:Q.value,alt:_.value.name,class:"circular-image"},null,8,Pe)]),t("div",Fe,[(l(!0),u(A,null,T($.value,d=>(l(),w(X,{key:d.id,value:d.value,x:d.x,duration:20,onEnd:x=>R(2,d.id)},null,8,["value","x","onEnd"]))),128))]),t("div",{class:"flip-wrapper right-wrapper",style:i([{"margin-top":"14px"},{transform:`translateX(${v.value?"-40%":"40%"})`}])},[(l(!0),u(A,null,T(J.value,(d,x)=>(l(),w(z,{key:"b"+x,number:d.toString()},null,8,["number"]))),128))],4)],4)]),t("div",Ne,[t("div",Le,[t("div",{class:"team-stat team-a",style:i({order:v.value?1:3})},c(r(a).teamA.teamPauses===5?"F":r(a).teamA.teamPauses),5),e[1]||(e[1]=t("div",{class:"stat-label",style:{order:"2"}},"暂停",-1)),t("div",{class:"team-stat team-b",style:i({order:v.value?3:1})},c(r(a).teamB.teamPauses===5?"F":r(a).teamB.teamPauses),5)]),t("div",Me,[t("div",{class:"team-stat team-a",style:i({order:v.value?1:3})},c(((o=r(a).teamA.SectionFouls)==null?void 0:o[r(a).currentPeriod])??0),5),e[2]||(e[2]=t("div",{class:"stat-label",style:{order:"2"}},"犯规",-1)),t("div",{class:"team-stat team-b",style:i({order:v.value?3:1})},c(((y=r(a).teamB.SectionFouls)==null?void 0:y[r(a).currentPeriod])??0),5)])])]),m.value!=="resting"&&m.value!=="ended"&&S.value?(l(),u("div",Ce)):b("",!0),m.value==="resting"?(l(),u("div",De,[t("span",Ee,"节间休息："+c(Y(g.value)),1)])):b("",!0),m.value==="ended"?(l(),u("div",Re,[...e[3]||(e[3]=[t("span",{class:"end-text",style:{color:"#ff6b6b","font-size":"40px","font-weight":"bold"}},"比赛结束",-1)])])):b("",!0)])]),L.value?(l(),u("div",{key:1,class:"team-info-panel team-b-panel",style:i({order:v.value?3:1})},[C(j,{"custom-players":r(a).teamB.players,num:0,"team-name":r(a).teamB.name||"队伍B"},null,8,["custom-players","team-name"])],4)):b("",!0)])])}}},Xe=N(Ve,[["__scopeId","data-v-04b515c6"]]);export{Xe as default};
