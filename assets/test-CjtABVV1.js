import{_ as N,r as i,x as k,c as u,o as l,b as t,t as c,F as A,f as T,s as te,m as r,j as U,y as w,w as ae,h as b,n,T as se,d as C,q as le}from"./index-CMqn_tIu.js";import{u as D}from"./team-yOgettLG.js";import{F as z}from"./FlipDigit-CLFmWwi_.js";/* empty css                                                             */const P="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20width='96'%20height='96'%20viewBox='0%200%2024%2024'%20fill='none'%20stroke='white'%20stroke-width='2'%20stroke-linecap='round'%20stroke-linejoin='round'%3e%3c!--%20尾巴%20--%3e%3cline%20x1='12'%20y1='4'%20x2='12'%20y2='16'/%3e%3c!--%20箭头%20--%3e%3cpolyline%20points='6%2012%2012%2018%2018%2012'/%3e%3c/svg%3e",oe={class:"scoreboard"},re={class:"title-container"},ne={class:"title"},ie={class:"players-container"},ue={class:"score-table"},ce={class:"score-play"},me={__name:"teamPk",props:{customPlayers:{type:Array,default:null},teamName:{type:String,default:""},num:{type:Number,default:1}},setup(f){const a=D(),_=f,g=i([{id:0,name:"0",score:0,foul:0}]);return k(()=>_.customPlayers?_.customPlayers.map(m=>({id:m.number||"0",name:m.name||"未知",score:m.score||0,foul:m.foul||0})):g.value),(m,S)=>(l(),u("div",oe,[t("div",re,[t("h2",ne,c(f.teamName),1)]),t("div",ie,[t("table",ue,[S[0]||(S[0]=t("thead",null,[t("tr",null,[t("th",null,"号码"),t("th",null,"姓名"),t("th",null,"得分"),t("th",null,"犯规")])],-1)),t("tbody",ce,[(l(!0),u(A,null,T(f.num?r(a).teamA.players:r(a).teamB.players,(v,h)=>(l(),u("tr",{key:v.number,class:te({"top-five":h<5})},[t("td",null,c(v.number),1),t("td",null,c(v.name),1),t("td",null,c(v.score),1),t("td",null,c(v.foul),1)],2))),128))])])])]))}},X=N(me,[["__scopeId","data-v-8d965a4f"]]),j=""+new URL("logo-Bv1Wukfg.png",import.meta.url).href,de={__name:"FloatNumber",props:{value:{type:Number,required:!0},x:{type:Number,default:0},duration:{type:Number,default:1e3}},setup(f){const a=f,_=i(!0);return U(()=>{setTimeout(()=>{_.value=!1},a.duration)}),(g,m)=>(l(),w(se,{name:"float",onAfterLeave:m[0]||(m[0]=S=>g.$emit("end"))},{default:ae(()=>[_.value?(l(),u("div",{key:0,class:"float-number",style:n({left:f.x+"px"})}," +"+c(f.value),5)):b("",!0)]),_:1}))}},H=N(de,[["__scopeId","data-v-26154419"]]),pe={class:"head"},ve={__name:"head",setup(f){const a=D();return(_,g)=>(l(),u("div",pe,[t("h1",null,c(r(a).matchName),1)]))}},fe=N(ve,[["__scopeId","data-v-179333be"]]);new BroadcastChannel("matchDataChannel");const ye={class:"background"},_e={class:"top_info"},he={class:"bottom_info"},ge={class:"center-panel",style:{order:"2"}},be={class:"vice-panel"},Se={class:"match-info-container"},Be={class:"teams-info"},xe={class:"team-logo team-a"},ke=["src"],Ae={class:"period-info",style:{order:"2"}},Te={class:"period-number"},we={class:"period-status"},$e={class:"team-logo team-b"},Ie=["src","alt"],Pe={class:"stats-container"},Fe={class:"stat-row"},Ne={class:"stat-row"},Le={key:0,class:"vice-24s-section"},Me={key:1,class:"vice-rest"},Ce={class:"rest-text",style:{color:"#49ddfa"}},De={key:2,class:"vice-end"},F=30,Ee={__name:"test",setup(f){le();const a=D();i({name:"",score:0,players:[]});const _=i({name:"",score:0,players:[]});i(22);const g=i(0),m=i("playing"),S=i(!0),v=i(null),h=i(null),L=i(!0);let W=0;const $=i([]),I=i([]),M=i();function E(s){const e=String(s).padStart(2,"0");return[e[0],e[1]]}const G=k(()=>E(a.teamA.score)),J=k(()=>E(a.teamB.score)),K=(s,e)=>{const o={id:W++,value:e,x:Math.random()*100};s===1?$.value.push(o):I.value.push(o)},R=(s,e)=>{s===1?$.value=$.value.filter(o=>o.id!==e):I.value=I.value.filter(o=>o.id!==e)},d=i(!0),B=i(!0),O=k(()=>localStorage.getItem("teamALogo")||j),Q=k(()=>localStorage.getItem("teamBLogo")||j);function Y(s){const e=String(Math.floor(s/60)).padStart(2,"0"),o=String(s%60).padStart(2,"0");return`${e}:${o}`}function V(s){if(s<=0)return"00''00''";const e=Math.ceil(s/1e3);if(e>60){const o=Math.floor(e/60).toString().padStart(2,"0"),y=(e%60).toString().padStart(2,"0");return`${o}:${y}`}else{const o=Math.floor(s/1e3).toString().padStart(2,"0"),y=Math.floor(s%1e3/10).toString().padStart(2,"0");return`${o}''${y}''`}}let q=null;U(()=>{q=new BroadcastChannel("matchDataChannel"),q.onmessage=s=>{if(s.data.type==="scoreAdded"){const e=s.data.state;s.data.team===1?(a.teamA.score=e.teamA.score,a.teamA.players=e.teamA.players,a.teamA=e.teamA):(a.teamB.score=e.teamB.score,a.teamB.players=e.teamB.players,a.teamB=e.teamB),K(s.data.team,s.data.points)}else if(s.data.type==="foul"){const e=s.data,o=s.data.playIndex,y=s.data.currentPeriod||a.currentPeriod;s.data.team===1?(a.teamA.teamFoul=e.teamFoul,a.teamA.players[o].foul=e.foul,a.teamA.SectionFouls[y]=e.sectionFoul||0):(a.teamB.teamFoul=e.teamFoul,a.teamB.players[o].foul=e.foul,a.teamB.SectionFouls[y]=e.sectionFoul||0)}else if(s.data.type==="pause"){const e=s.data;s.data.team===1?a.teamA.teamPauses=e.pause:a.teamB.teamPauses=e.pause}else if(s.data.type==="time"){const e=s.data;M.value=e.timeType,a.currentPeriod=e.currentPeriod,a.timer.periodTime=e.periodTime,a.timer.breakTime=e.breakTime,Z(e)}else if(s.data.type==="hide"){const e=s.data;L.value=e.hide}else if(s.data.type==="possession"){const e=s.data;B.value=e.possession}else if(s.data.type==="swap"){const e=s.data;d.value=e.swap}}});function Z(s){ee(),s.time&&(s.timeType?v.value=setInterval(()=>{a.timer.periodTime>0?a.timer.periodTime-=F:(a.timer.periodTime=0,clearInterval(v.value),v.value=null)},F):h.value=setInterval(()=>{a.timer.breakTime>0?a.timer.breakTime-=F:(a.timer.breakTime=0,clearInterval(h.value),h.value=null)},F))}function ee(){v.value&&(clearInterval(v.value),v.value=null),h.value&&(clearInterval(h.value),h.value=null)}return(s,e)=>{var o,y;return l(),u("div",ye,[t("div",_e,[C(fe)]),t("div",he,[L.value?(l(),u("div",{key:0,class:"team-info-panel team-a-panel",style:n({order:d.value?1:3})},[C(X,{"custom-players":r(a).teamA.players,"team-name":r(a).teamA.name||"队伍A",num:1},null,8,["custom-players","team-name"])],4)):b("",!0),t("div",ge,[t("div",be,[e[4]||(e[4]=t("div",{class:"vice-title qiuquan"},null,-1)),t("div",Se,[t("div",Be,[t("div",{class:"team-info teamLeft",style:n({order:d.value?1:3})},[t("img",{src:P,alt:"箭头",style:n({opacity:B.value?1:0})},null,4),t("div",xe,[t("img",{src:P,alt:"箭头",class:"logo-arrow",style:n({opacity:B.value?0:1})},null,4),t("img",{src:O.value,class:"circular-image"},null,8,ke)]),t("div",{class:"float-container float-left",style:n({transform:`translateX(${d.value?"40%":"-40%"})`})},[(l(!0),u(A,null,T($.value,p=>(l(),w(H,{key:p.id,value:p.value,x:p.x,duration:20,onEnd:x=>R(1,p.id)},null,8,["value","x","onEnd"]))),128))],4),t("div",{class:"flip-wrapper left-wrapper",style:n([{"margin-top":"14px"},{transform:`translateX(${d.value?"40%":"-40%"})`}])},[(l(!0),u(A,null,T(G.value,(p,x)=>(l(),w(z,{key:"a"+x,number:p.toString()},null,8,["number"]))),128))],4)],4),t("div",Ae,[t("div",Te,c(M.value?"第"+r(a).currentPeriod+"节":"节间休息"),1),t("div",we,c(M.value?V(r(a).timer.periodTime):V(r(a).timer.breakTime)),1),e[0]||(e[0]=t("div",{class:"VS",style:{position:"relative","font-size":"100px",top:"140px"}},null,-1))]),t("div",{class:"team-info teamRight",style:n({order:d.value?3:1})},[t("img",{src:P,alt:"箭头",style:n({opacity:B.value?0:1})},null,4),t("div",$e,[t("img",{src:P,alt:"箭头",class:"logo-arrow",style:n({opacity:B.value?1:0})},null,4),t("img",{src:Q.value,alt:_.value.name,class:"circular-image"},null,8,Ie)]),t("div",{class:"float-container float-right",style:n({transform:`translateX(${d.value?"-40%":"40%"})`})},[(l(!0),u(A,null,T(I.value,p=>(l(),w(H,{key:p.id,value:p.value,x:p.x,duration:20,onEnd:x=>R(2,p.id)},null,8,["value","x","onEnd"]))),128))],4),t("div",{class:"flip-wrapper right-wrapper",style:n([{"margin-top":"14px"},{transform:`translateX(${d.value?"-40%":"40%"})`}])},[(l(!0),u(A,null,T(J.value,(p,x)=>(l(),w(z,{key:"b"+x,number:p.toString()},null,8,["number"]))),128))],4)],4)]),t("div",Pe,[t("div",Fe,[t("div",{class:"team-stat team-a",style:n({order:d.value?1:3})},c(r(a).teamA.teamPauses===5?"F":r(a).teamA.teamPauses),5),e[1]||(e[1]=t("div",{class:"stat-label",style:{order:"2"}},"暂停",-1)),t("div",{class:"team-stat team-b",style:n({order:d.value?3:1})},c(r(a).teamB.teamPauses===5?"F":r(a).teamB.teamPauses),5)]),t("div",Ne,[t("div",{class:"team-stat team-a",style:n({order:d.value?1:3})},c(((o=r(a).teamA.SectionFouls)==null?void 0:o[r(a).currentPeriod])??0),5),e[2]||(e[2]=t("div",{class:"stat-label",style:{order:"2"}},"犯规",-1)),t("div",{class:"team-stat team-b",style:n({order:d.value?3:1})},c(((y=r(a).teamB.SectionFouls)==null?void 0:y[r(a).currentPeriod])??0),5)])])]),m.value!=="resting"&&m.value!=="ended"&&S.value?(l(),u("div",Le)):b("",!0),m.value==="resting"?(l(),u("div",Me,[t("span",Ce,"节间休息："+c(Y(g.value)),1)])):b("",!0),m.value==="ended"?(l(),u("div",De,[...e[3]||(e[3]=[t("span",{class:"end-text",style:{color:"#ff6b6b","font-size":"40px","font-weight":"bold"}},"比赛结束",-1)])])):b("",!0)])]),L.value?(l(),u("div",{key:1,class:"team-info-panel team-b-panel",style:n({order:d.value?3:1})},[C(X,{"custom-players":r(a).teamB.players,num:0,"team-name":r(a).teamB.name||"队伍B"},null,8,["custom-players","team-name"])],4)):b("",!0)])])}}},Xe=N(Ee,[["__scopeId","data-v-dc1e9a94"]]);export{Xe as default};
